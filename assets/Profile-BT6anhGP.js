import{r as c,I as j,_ as f,b as B,j as e,L as d,B as v}from"./index-CbcJRL3k.js";import{g,a as F}from"./auth-D_zOBMeq.js";import{F as a}from"./index-DzUoQKQC.js";import{C as V,T as y}from"./index-yT7z0R9N.js";import{R as p}from"./UserOutlined-Bl2ZtE0y.js";import{R as C,L as t,S as L}from"./index-Ce4GXzjD.js";import{U as O}from"./index-BpaARcAh.js";import{I as n}from"./index-C1q38Ntb.js";import{R as x}from"./LockOutlined-0eQkF90f.js";import{A as S}from"./index-_Jxy2F_8.js";import{T as U}from"./index-IXaqDtfn.js";import{T as I}from"./index-DPIr4DBV.js";import{D as $}from"./index-U494ttLB.js";import{S as A}from"./index-CPCu-Awr.js";import"./collapse-BbEVqHco.js";import"./row-oqDN9NaK.js";import"./roundedArrow-ZXwI2xFQ.js";import"./index-BKzotca0.js";import"./EllipsisOutlined-Dh0XXIS3.js";import"./useVariants-DE2B2smb.js";import"./Pagination-1VEaDFmM.js";import"./LeftOutlined-BtNA29Ex.js";import"./RightOutlined-BLpIbDbF.js";import"./index-CQWGyHIi.js";import"./PurePanel-3I4INXzI.js";import"./index-BqCjM9dL.js";import"./useIcons-DeF26C09.js";import"./DownOutlined-DkPoV1du.js";import"./SearchOutlined-CAodkCHB.js";import"./DeleteOutlined-D9_VD5Rq.js";import"./TextArea-BLJSUrB-.js";import"./index-CeTWp4GU.js";import"./EditOutlined-ZsrA_iia.js";import"./styleChecker-wZ6_H3ZI.js";var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M816 768h-24V428c0-141.1-104.3-257.7-240-277.1V112c0-22.1-17.9-40-40-40s-40 17.9-40 40v38.9c-135.7 19.4-240 136-240 277.1v340h-24c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h216c0 61.8 50.2 112 112 112s112-50.2 112-112h216c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM512 888c-26.5 0-48-21.5-48-48h96c0 26.5-21.5 48-48 48zM304 768V428c0-55.6 21.6-107.8 60.9-147.1S456.4 220 512 220c55.6 0 107.8 21.6 147.1 60.9S720 372.4 720 428v340H304z"}}]},name:"bell",theme:"outlined"},E=function(o,i){return c.createElement(j,f({},o,{ref:i,icon:k}))},q=c.forwardRef(E),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 110.8V792H136V270.8l-27.6-21.5 39.3-50.5 42.8 33.3h643.1l42.8-33.3 39.3 50.5-27.7 21.5zM833.6 232L512 482 190.4 232l-42.8-33.3-39.3 50.5 27.6 21.5 341.6 265.6a55.99 55.99 0 0068.7 0L888 270.8l27.6-21.5-39.3-50.5-42.7 33.2z"}}]},name:"mail",theme:"outlined"},_=function(o,i){return c.createElement(j,f({},o,{ref:i,icon:H}))},N=c.forwardRef(_),D={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 00-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"upload",theme:"outlined"},G=function(o,i){return c.createElement(j,f({},o,{ref:i,icon:D}))},J=c.forwardRef(G);const{TabPane:h}=y,{Title:K}=U,Be=()=>{const{user:r}=B(),[o,i]=c.useState(!1),[u]=a.useForm(),[w]=a.useForm(),b=async s=>{try{i(!0),setTimeout(()=>{d.success("个人信息更新成功"),i(!1)},1e3)}catch(l){console.error("更新个人信息失败:",l),d.error("更新个人信息失败"),i(!1)}},M=async s=>{try{i(!0),setTimeout(()=>{d.success("密码修改成功"),u.resetFields(),i(!1)},1e3)}catch(l){console.error("修改密码失败:",l),d.error("修改密码失败"),i(!1)}},P=()=>e.jsxs(a,{form:w,layout:"vertical",initialValues:{name:r==null?void 0:r.name,email:r==null?void 0:r.email},onFinish:b,children:[e.jsx(a.Item,{label:"头像",children:e.jsx(O,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,action:"/api/upload/avatar",beforeUpload:s=>{const l=s.type==="image/jpeg"||s.type==="image/png";l||d.error("只能上传 JPG/PNG 格式的图片!");const m=s.size/1024/1024<2;return m||d.error("图片大小不能超过 2MB!"),l&&m},children:r!=null&&r.avatar?e.jsx("img",{src:r.avatar,alt:"avatar",style:{width:"100%"}}):e.jsxs("div",{children:[e.jsx(J,{}),e.jsx("div",{style:{marginTop:8},children:"上传"})]})})}),e.jsx(a.Item,{name:"name",label:"姓名",rules:[{required:!0,message:"请输入姓名"}],children:e.jsx(n,{prefix:e.jsx(p,{}),placeholder:"请输入姓名"})}),e.jsx(a.Item,{name:"email",label:"邮箱",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:e.jsx(n,{prefix:e.jsx(N,{}),placeholder:"请输入邮箱"})}),e.jsx(a.Item,{name:"phone",label:"电话",children:e.jsx(n,{placeholder:"请输入电话"})}),e.jsx(a.Item,{name:"bio",label:"个人简介",children:e.jsx(n.TextArea,{rows:4,placeholder:"请输入个人简介"})}),e.jsx(a.Item,{children:e.jsx(v,{type:"primary",htmlType:"submit",loading:o,children:"保存"})})]}),T=()=>e.jsxs(a,{form:u,layout:"vertical",onFinish:M,children:[e.jsx(a.Item,{name:"oldPassword",label:"当前密码",rules:[{required:!0,message:"请输入当前密码"}],children:e.jsx(n.Password,{prefix:e.jsx(x,{}),placeholder:"请输入当前密码"})}),e.jsx(a.Item,{name:"newPassword",label:"新密码",rules:[{required:!0,message:"请输入新密码"},{min:6,message:"密码长度不能少于6个字符"}],children:e.jsx(n.Password,{prefix:e.jsx(x,{}),placeholder:"请输入新密码"})}),e.jsx(a.Item,{name:"confirmPassword",label:"确认新密码",dependencies:["newPassword"],rules:[{required:!0,message:"请确认新密码"},({getFieldValue:s})=>({validator(l,m){return!m||s("newPassword")===m?Promise.resolve():Promise.reject(new Error("两次输入的密码不一致"))}})],children:e.jsx(n.Password,{prefix:e.jsx(x,{}),placeholder:"请确认新密码"})}),e.jsx(a.Item,{children:e.jsx(v,{type:"primary",htmlType:"submit",loading:o,children:"修改密码"})})]}),R=()=>e.jsx(t,{itemLayout:"horizontal",dataSource:[{title:"系统通知",description:"接收系统更新和维护通知",defaultChecked:!0},{title:"任务提醒",description:"接收任务分配和截止日期提醒",defaultChecked:!0},{title:"消息通知",description:"接收新消息和评论通知",defaultChecked:!1},{title:"邮件通知",description:"通过邮件接收重要通知",defaultChecked:!0}],renderItem:s=>e.jsx(t.Item,{actions:[e.jsx(L,{defaultChecked:s.defaultChecked})],children:e.jsx(t.Item.Meta,{title:s.title,description:s.description})})}),z=()=>e.jsxs("div",{children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:"24px"},children:[e.jsx(S,{size:80,src:r==null?void 0:r.avatar,icon:!(r!=null&&r.avatar)&&e.jsx(p,{})}),e.jsx(K,{level:4,style:{marginTop:"16px",marginBottom:"4px"},children:r==null?void 0:r.name}),(r==null?void 0:r.role)&&e.jsx(I,{color:F(r.role),children:g(r.role)})]}),e.jsx($,{}),e.jsxs(t,{children:[e.jsx(t.Item,{children:e.jsx(t.Item.Meta,{title:"用户名",description:r==null?void 0:r.username})}),e.jsx(t.Item,{children:e.jsx(t.Item.Meta,{title:"邮箱",description:r==null?void 0:r.email})}),e.jsx(t.Item,{children:e.jsx(t.Item.Meta,{title:"角色",description:r!=null&&r.role?g(r.role):"未知"})}),e.jsx(t.Item,{children:e.jsx(t.Item.Meta,{title:"权限",description:e.jsx(A,{wrap:!0,children:r!=null&&r.permissions&&r.permissions.length>0?r.permissions.map(s=>e.jsx(I,{children:s},s)):e.jsx("span",{children:"无特殊权限"})})})}),e.jsx(t.Item,{children:e.jsx(t.Item.Meta,{title:"注册时间",description:"2023-01-01"})}),e.jsx(t.Item,{children:e.jsx(t.Item.Meta,{title:"最后登录",description:"2023-06-15"})})]})]});return e.jsx(V,{title:"个人中心",children:e.jsxs(y,{defaultActiveKey:"profile",children:[e.jsx(h,{tab:e.jsxs("span",{children:[e.jsx(p,{}),"个人信息"]}),children:P()},"profile"),e.jsx(h,{tab:e.jsxs("span",{children:[e.jsx(C,{}),"安全设置"]}),children:T()},"security"),e.jsx(h,{tab:e.jsxs("span",{children:[e.jsx(q,{}),"通知设置"]}),children:R()},"notification"),e.jsx(h,{tab:e.jsxs("span",{children:[e.jsx(p,{}),"账户信息"]}),children:z()},"account")]})})};export{Be as default};
