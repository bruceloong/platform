import{r as d,I as g,_ as v,u as w,j as e,B as m,L as i,T as I}from"./index-gwXPppyA.js";import{F as r}from"./index-4QKhSQgA.js";import{C as b}from"./index-goZSXMNr.js";import{I as t}from"./index-D0F52OSf.js";import{S as f}from"./index--rYPTX4s.js";import{D as C}from"./index-DjHsVlaB.js";import{S as x}from"./index-RsA7oBgA.js";import{R as S}from"./ArrowLeftOutlined-BUto28mB.js";import"./collapse-BbEVqHco.js";import"./row-CO-Jj3aa.js";import"./roundedArrow-UnQcrx47.js";import"./index-KdSA8sJo.js";import"./EllipsisOutlined-CBn_aQYb.js";import"./useVariants-D1uNV9L6.js";import"./index-BuOyQSrX.js";import"./TextArea-C9pSGXaW.js";import"./SearchOutlined-DdqiLUn6.js";import"./PurePanel-CE15QNp1.js";import"./useIcons-BHuVDkqT.js";import"./DownOutlined-CQfZH5HP.js";var y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},P=function(s,l){return d.createElement(g,v({},s,{ref:l,icon:y}))},q=d.forwardRef(P);const{Option:c}=f,K=()=>{const[p]=r.useForm(),s=w(),[l,u]=d.useState(!1),j=async a=>{if(a.password!==a.confirmPassword){i.error("两次输入的密码不一致");return}try{u(!0);const{confirmPassword:n,...o}=a,h=await I.createUser(o);h.success?(i.success("创建用户成功"),s("/user/list")):i.error(h.message||"创建用户失败")}catch(n){console.error("创建用户失败:",n),i.error("创建用户失败")}finally{u(!1)}};return e.jsx(b,{title:e.jsxs(x,{children:[e.jsx(m,{icon:e.jsx(S,{}),onClick:()=>s("/user/list"),children:"返回"}),e.jsx("span",{children:"创建用户"})]}),children:e.jsxs(r,{form:p,name:"user_create",labelCol:{span:4},wrapperCol:{span:16},onFinish:j,autoComplete:"off",children:[e.jsx(r.Item,{label:"用户名",name:"username",rules:[{required:!0,message:"请输入用户名"},{min:3,message:"用户名至少3个字符"},{max:20,message:"用户名最多20个字符"}],children:e.jsx(t,{placeholder:"请输入用户名"})}),e.jsx(r.Item,{label:"姓名",name:"name",rules:[{required:!0,message:"请输入姓名"}],children:e.jsx(t,{placeholder:"请输入姓名"})}),e.jsx(r.Item,{label:"邮箱",name:"email",rules:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入有效的邮箱地址"}],children:e.jsx(t,{placeholder:"请输入邮箱"})}),e.jsx(r.Item,{label:"密码",name:"password",rules:[{required:!0,message:"请输入密码"},{min:6,message:"密码至少6个字符"}],children:e.jsx(t.Password,{placeholder:"请输入密码"})}),e.jsx(r.Item,{label:"确认密码",name:"confirmPassword",rules:[{required:!0,message:"请确认密码"},({getFieldValue:a})=>({validator(n,o){return!o||a("password")===o?Promise.resolve():Promise.reject(new Error("两次输入的密码不一致"))}})],children:e.jsx(t.Password,{placeholder:"请确认密码"})}),e.jsx(r.Item,{label:"角色",name:"role",rules:[{required:!0,message:"请选择角色"}],children:e.jsxs(f,{placeholder:"请选择角色",children:[e.jsx(c,{value:"admin",children:"管理员"}),e.jsx(c,{value:"editor",children:"编辑者"}),e.jsx(c,{value:"guest",children:"访客"})]})}),e.jsx(C,{}),e.jsx(r.Item,{wrapperCol:{offset:4,span:16},children:e.jsxs(x,{children:[e.jsx(m,{type:"primary",htmlType:"submit",icon:e.jsx(q,{}),loading:l,children:"创建"}),e.jsx(m,{onClick:()=>s("/user/list"),children:"取消"})]})})]})})};export{K as default};
